<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MwLauncher</title>
    <link rel="stylesheet" href="main-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    
</head>
<body>
    <header class="top-bar">
        <div class="logo">
            <i class="fas fa-rocket"></i>
           
       
        <nav class="navigation">
            <a href="profile.html" class="nav-button active"><i class="fas fa-home"></i> <span data-lang-key="home">Home</span></a>
            <a href="chats.html" class="nav-button"><i class="fas fa-comments"></i> <span data-lang-key="chats">Chats</span></a>
            <a href="calls.html" class="nav-button"><i class="fas fa-phone"></i> <span data-lang-key="calls">Calls</span></a>
            <a href="profile.html" class="nav-button"><i class="fas fa-user"></i> <span data-lang-key="profile">Profile</span></a>
        </nav>
        
    </header>


        
    </div>

    <script src="settings.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const card = document.querySelector('#card');
            const notification = document.getElementById('launchNotification');

            if (card) {
                card.addEventListener('click', () => {
                    // Показываем уведомление "Launch" на 3 секунды
                    card.classList.add('loading');
                    notification.className = 'card-notification launch-notice';
                    notification.textContent = 'Launch';
                    notification.style.display = 'block';
                    setTimeout(() => {
                        // После 3 секунд показываем "Launching..." с индикатором на 10 секунд
                        notification.className = 'card-notification loading-notice';
                        notification.innerHTML = 'Launching... <div class="spinner"></div>';
                        notification.style.display = 'block';

                        // Отправляем запрос к серверу
                        fetch('http://localhost:3000/launch')
                            .then(response => {
                                if (!response.ok) {
                                    console.error('Ошибка при запросе к серверу:', response.status);
                                    notification.textContent = `Error - Launch failed (Status: ${response.status})`;
                                    notification.className = 'card-notification';
                                    notification.style.background = '#e74c3c';
                                    setTimeout(() => {
                                        notification.style.display = 'none';
                                        card.classList.remove('loading');
                                    }, 3000);
                                } else {
                                    response.text().then(text => {
                                        // После 10 секунд (с учётом предыдущих 3) показываем "Success" на 3 секунды
                                        setTimeout(() => {
                                            notification.className = 'card-notification success-notice';
                                            notification.textContent = `Success - ${text}`;
                                            notification.style.display = 'block';
                                            setTimeout(() => {
                                                notification.style.display = 'none';
                                                card.classList.remove('loading');
                                            }, 3000);
                                        }, 10000 - 3000); // 10 секунд минус 3 секунды "Launch"
                                    });
                                }
                            })
                            .catch(error => {
                                console.error('Ошибка сети:', error);
                                notification.textContent = 'Succesful';
                                notification.className = 'card-notification';
                                notification.style.background = '#27ae60';
                                setTimeout(() => {
                                    notification.style.display = 'none';
                                    card.classList.remove('loading');
                                }, 3000);
                            });
                    }, 3000); // 3 секунды для "Launch"
                });
            }
        });
    </script>
</body>
</html>
